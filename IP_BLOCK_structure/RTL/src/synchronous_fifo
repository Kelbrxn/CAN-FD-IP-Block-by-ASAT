module fifo_controller #(
    parameter DEPTH = 32
)(
    input  logic                        clk,
    input  logic                        rst_n,

    // Controls (Renamed)
    input  logic                        write_en,
    input  logic                        read_en,

    // Output Pointers to RAM
    output logic [$clog2(DEPTH)-1:0]    waddr,
    output logic [$clog2(DEPTH)-1:0]    raddr,

    // Status Flags
    output logic                        full,
    output logic                        empty
);

    localparam ADDR_WIDTH = $clog2(DEPTH);

    // N+1 Bit Pointers (e.g., 6 bits for Depth 32)
    logic [ADDR_WIDTH:0] wr_ptr;
    logic [ADDR_WIDTH:0] rd_ptr;

    // --- Pointer Logic (Natural Overflow) ---
    always_ff @(posedge clk or negedge rst_n) begin
        if (!rst_n) begin
            wr_ptr <= '0;
            rd_ptr <= '0;
        end else begin
            // Increment Write Pointer
            if (write_en && !full)
                wr_ptr <= wr_ptr + 1'b1;

            // Increment Read Pointer
            if (read_en && !empty)
                rd_ptr <= rd_ptr + 1'b1;
        end
    end

    // --- RAM Address Generation ---
    // Slice off the Extra Bit (MSB) to get the actual index
    assign waddr = wr_ptr[ADDR_WIDTH-1:0];
    assign raddr = rd_ptr[ADDR_WIDTH-1:0];

    // --- Status Flags ---
    // Empty: Pointers are identical
    assign empty = (wr_ptr == rd_ptr);

    // Full: MSB is different (wrapped), but lower bits are identical
    assign full  = (wr_ptr[ADDR_WIDTH] != rd_ptr[ADDR_WIDTH]) && 
                   (wr_ptr[ADDR_WIDTH-1:0] == rd_ptr[ADDR_WIDTH-1:0]);

endmodule
